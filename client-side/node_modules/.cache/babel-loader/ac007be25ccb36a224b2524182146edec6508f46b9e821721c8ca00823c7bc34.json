{"ast":null,"code":"var _jsxFileName = \"/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostPage() {\n  _s();\n  const [postInfo, setPostInfo] = useState(null);\n  const {\n    userInfo\n  } = useContext(UserContext);\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate(); // Use the navigate hook\n\n  useEffect(() => {\n    fetch(`http://localhost:4000/post/${id}`).then(response => response.json()).then(postInfo => {\n      setPostInfo(postInfo);\n    });\n  }, [id]);\n  if (!postInfo) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 16\n    }, this);\n  }\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      const response = await fetch('http://localhost:4000/post', {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include',\n        body: JSON.stringify({\n          id: postInfo._id\n        }) // Use postInfo._id\n      });\n      if (response.ok) {\n        navigate('/'); // Redirect to homepage\n      } else {\n        console.error('Failed to delete post');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-post-page\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: postInfo.file,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: postInfo.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: postInfo.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: postInfo.content\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '1.2rem',\n          margin: '3px'\n        },\n        children: [\"by \", postInfo.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '0.8rem',\n          margin: '0',\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactTimeAgo, {\n          date: postInfo.createdAt,\n          locale: \"en-US\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), userInfo.id === postInfo.author._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"edit-btn\",\n          to: `/edit/${postInfo._id}`,\n          children: \"Edit this post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 9\n  }, this);\n}\n_s(PostPage, \"tA/nJWzeXLtbckzaxV8z8jwAWrg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["useContext","useEffect","useState","useParams","useNavigate","ReactTimeAgo","UserContext","jsxDEV","_jsxDEV","PostPage","_s","postInfo","setPostInfo","userInfo","id","navigate","fetch","then","response","json","children","fileName","_jsxFileName","lineNumber","columnNumber","handleDelete","window","confirm","method","headers","credentials","body","JSON","stringify","_id","ok","console","error","className","src","file","alt","title","summary","dangerouslySetInnerHTML","__html","content","style","fontSize","margin","author","username","display","date","createdAt","locale","Link","to","onClick","_c","$RefreshReg$"],"sources":["/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\n\nexport default function PostPage() {\n    const [postInfo, setPostInfo] = useState(null);\n    const { userInfo } = useContext(UserContext);\n    const { id } = useParams();\n    const navigate = useNavigate(); // Use the navigate hook\n\n    useEffect(() => {\n        fetch(`http://localhost:4000/post/${id}`)\n            .then(response => response.json())\n            .then(postInfo => {\n                setPostInfo(postInfo);\n            });\n    }, [id]);\n\n    if (!postInfo) {\n        return <p>Loading...</p>;\n    }\n\n    const handleDelete = async () => {\n        if (window.confirm('Are you sure you want to delete this post?')) {\n            const response = await fetch('http://localhost:4000/post', {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                credentials: 'include',\n                body: JSON.stringify({ id: postInfo._id }), // Use postInfo._id\n            });\n\n            if (response.ok) {\n                navigate('/'); // Redirect to homepage\n            } else {\n                console.error('Failed to delete post');\n            }\n        }\n    };\n\n    return (\n        <div>\n            <div className=\"image-post-page\">\n                <img src={postInfo.file} alt=\"\" />\n            </div>\n            <div className=\"post-page\">\n                <h1>{postInfo.title}</h1>\n                <h4>{postInfo.summary}</h4>\n            </div>\n            <div className=\"post-page-content\">\n                <div dangerouslySetInnerHTML={{ __html: postInfo.content }} />\n                <h6 style={{ fontSize: '1.2rem', margin: '3px' }}>by {postInfo.author.username}</h6>\n                <h6 style={{ fontSize: '0.8rem', margin: '0', display: 'block' }}>\n                    <ReactTimeAgo date={postInfo.createdAt} locale=\"en-US\" />\n                </h6>\n                {userInfo.id === postInfo.author._id && (\n                    <div className=\"edit\">\n                        <Link className=\"edit-btn\" to={`/edit/${postInfo._id}`}>Edit this post</Link>\n                        <button className=\"delete-btn\" onClick={handleDelete}>Delete</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}