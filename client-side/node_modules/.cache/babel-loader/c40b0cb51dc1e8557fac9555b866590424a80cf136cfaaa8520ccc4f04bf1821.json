{"ast":null,"code":"var _jsxFileName = \"/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\n\n// Use environment variable for API base URL\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\nexport default function PostPage() {\n  _s();\n  // State to hold post information\n  const [postInfo, setPostInfo] = useState(null);\n\n  // Get user information from context\n  const {\n    userInfo\n  } = useContext(UserContext);\n\n  // Extract post ID from URL parameters\n  const {\n    id\n  } = useParams();\n\n  // Hook to programmatically navigate\n  const navigate = useNavigate();\n\n  // Fetch post information when component mounts or post ID changes\n  useEffect(() => {\n    fetch(`${API_BASE_URL}/post/${id}`).then(response => response.json()).then(postData => {\n      setPostInfo(postData);\n    }).catch(error => console.error('Error fetching post:', error));\n  }, [id]);\n\n  // Display a loading message while the post information is being fetched\n  if (!postInfo) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Handle post deletion\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      const response = await fetch(`${API_BASE_URL}/post/${postInfo._id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include' // Ensures cookies are sent\n      });\n      if (response.ok) {\n        // Redirect to the homepage after successful deletion\n        window.location.href = '/';\n      } else {\n        console.error('Failed to delete post');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-post-page\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: postInfo.file,\n        alt: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: postInfo.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: postInfo.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: postInfo.content\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '1.2rem',\n          margin: '3px'\n        },\n        children: [\"by \", postInfo.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '0.8rem',\n          margin: '0',\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactTimeAgo, {\n          date: postInfo.createdAt,\n          locale: \"en-US\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this), userInfo.id === postInfo.author._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-btn\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"edit-btn\",\n            to: `/edit/${postInfo._id}`,\n            children: \"Edit this post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 9\n  }, this);\n}\n_s(PostPage, \"tA/nJWzeXLtbckzaxV8z8jwAWrg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["useContext","useEffect","useState","useParams","useNavigate","Link","ReactTimeAgo","UserContext","jsxDEV","_jsxDEV","API_BASE_URL","process","env","REACT_APP_API_BASE_URL","PostPage","_s","postInfo","setPostInfo","userInfo","id","navigate","fetch","then","response","json","postData","catch","error","console","children","fileName","_jsxFileName","lineNumber","columnNumber","handleDelete","window","confirm","_id","method","headers","credentials","ok","location","href","className","src","file","alt","title","summary","dangerouslySetInnerHTML","__html","content","style","fontSize","margin","author","username","display","date","createdAt","locale","to","onClick","_c","$RefreshReg$"],"sources":["/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\n\n// Use environment variable for API base URL\nconst API_BASE_URL = process.env.REACT_APP_API_BASE_URL;\n\nexport default function PostPage() {\n    // State to hold post information\n    const [postInfo, setPostInfo] = useState(null);\n    \n    // Get user information from context\n    const { userInfo } = useContext(UserContext);\n    \n    // Extract post ID from URL parameters\n    const { id } = useParams();\n    \n    // Hook to programmatically navigate\n    const navigate = useNavigate();\n\n    // Fetch post information when component mounts or post ID changes\n    useEffect(() => {\n        fetch(`${API_BASE_URL}/post/${id}`)\n            .then(response => response.json())\n            .then(postData => {\n                setPostInfo(postData);\n            })\n            .catch(error => console.error('Error fetching post:', error));\n    }, [id]);\n\n    // Display a loading message while the post information is being fetched\n    if (!postInfo) {\n        return <p>Loading...</p>;\n    }\n\n    // Handle post deletion\n    const handleDelete = async () => {\n        if (window.confirm('Are you sure you want to delete this post?')) {\n            const response = await fetch(`${API_BASE_URL}/post/${postInfo._id}`, {\n                method: 'DELETE',\n                \n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                credentials: 'include', // Ensures cookies are sent\n            });\n    \n            if (response.ok) {\n                // Redirect to the homepage after successful deletion\n                window.location.href = '/';\n            } else {\n                console.error('Failed to delete post');\n            }\n        }\n    };\n\n    return (\n        <div>\n            {/* Display post image */}\n            <div className=\"image-post-page\">\n                <img src={postInfo.file} alt=\"Post\" />\n            </div>\n            \n            {/* Display post title and summary */}\n            <div className=\"post-page\">\n                <h1>{postInfo.title}</h1>\n                <h4>{postInfo.summary}</h4>\n            </div>\n            \n            {/* Display post content, author information, and timestamp */}\n            <div className=\"post-page-content\">\n                <div dangerouslySetInnerHTML={{ __html: postInfo.content }} />\n                <h6 style={{ fontSize: '1.2rem', margin: '3px' }}>by {postInfo.author.username}</h6>\n                <h6 style={{ fontSize: '0.8rem', margin: '0', display: 'block' }}>\n                    <ReactTimeAgo date={postInfo.createdAt} locale=\"en-US\" />\n                </h6>\n                \n                \n                {userInfo.id === postInfo.author._id && (\n                    <div className=\"edit\">\n                       <button className=\"edit-btn\">\n                           <Link className=\"edit-btn\" to={`/edit/${postInfo._id}`}>Edit this post</Link>\n                       </button>\n                       <button className=\"delete-btn\" onClick={handleDelete}>Delete</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}