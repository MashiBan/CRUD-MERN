{"ast":null,"code":"var _jsxFileName = \"/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostPage() {\n  _s();\n  const [postInfo, setPostInfo] = useState(null);\n  const {\n    userInfo\n  } = useContext(UserContext);\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    fetch(`https://crud-mern-2caq.onrender.com/post/${id}`).then(response => {\n      if (!response.ok) {\n        throw new Error('Network response was not ok');\n      }\n      return response.json();\n    }).then(postData => {\n      setPostInfo(postData);\n    }).catch(error => console.error('Error fetching post:', error));\n  }, [id]);\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      const response = await fetch(`https://crud-mern-2caq.onrender.com/post/${postInfo._id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include' // Ensures cookies are sent\n      });\n      if (response.ok) {\n        // Redirect to the homepage after successful deletion\n        window.location.href = '/';\n      } else {\n        console.error('Failed to delete post');\n      }\n    }\n  };\n  if (!postInfo) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-post-page\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: postInfo.file,\n        alt: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: postInfo.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: postInfo.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: postInfo.content\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '1.2rem',\n          margin: '3px'\n        },\n        children: [\"by \", postInfo.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '0.8rem',\n          margin: '0',\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactTimeAgo, {\n          date: postInfo.createdAt,\n          locale: \"en-US\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this), userInfo.id === postInfo.author._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"edit-btn\",\n          children: /*#__PURE__*/_jsxDEV(Link, {\n            className: \"edit-btn\",\n            to: `/edit/${postInfo._id}`,\n            children: \"Edit this post\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 28\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 24\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 9\n  }, this);\n}\n_s(PostPage, \"EdKgyJmKcA792Weu2K9/6phML5o=\", false, function () {\n  return [useParams];\n});\n_c = PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["useContext","useEffect","useState","useParams","Link","ReactTimeAgo","UserContext","jsxDEV","_jsxDEV","PostPage","_s","postInfo","setPostInfo","userInfo","id","fetch","then","response","ok","Error","json","postData","catch","error","console","handleDelete","window","confirm","_id","method","headers","credentials","location","href","children","fileName","_jsxFileName","lineNumber","columnNumber","className","src","file","alt","title","summary","dangerouslySetInnerHTML","__html","content","style","fontSize","margin","author","username","display","date","createdAt","locale","to","onClick","_c","$RefreshReg$"],"sources":["/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useParams, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\n\nexport default function PostPage() {\n    const [postInfo, setPostInfo] = useState(null);\n    const { userInfo } = useContext(UserContext);\n    const { id } = useParams();\n\n    useEffect(() => {\n        fetch(`https://crud-mern-2caq.onrender.com/post/${id}`)\n            .then(response => {\n                if (!response.ok) {\n                    throw new Error('Network response was not ok');\n                }\n                return response.json();\n            })\n            .then(postData => {\n                setPostInfo(postData);\n            })\n            .catch(error => console.error('Error fetching post:', error));\n    }, [id]);\n\n    const handleDelete = async () => {\n        if (window.confirm('Are you sure you want to delete this post?')) {\n            const response = await fetch(`https://crud-mern-2caq.onrender.com/post/${postInfo._id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                credentials: 'include', // Ensures cookies are sent\n            });\n\n            if (response.ok) {\n                // Redirect to the homepage after successful deletion\n                window.location.href = '/';\n            } else {\n                console.error('Failed to delete post');\n            }\n        }\n    };\n\n    if (!postInfo) {\n        return <p>Loading...</p>;\n    }\n\n    return (\n        <div>\n            <div className=\"image-post-page\">\n                <img src={postInfo.file} alt=\"Post\" />\n            </div>\n            <div className=\"post-page\">\n                <h1>{postInfo.title}</h1>\n                <h4>{postInfo.summary}</h4>\n            </div>\n            <div className=\"post-page-content\">\n                <div dangerouslySetInnerHTML={{ __html: postInfo.content }} />\n                <h6 style={{ fontSize: '1.2rem', margin: '3px' }}>by {postInfo.author.username}</h6>\n                <h6 style={{ fontSize: '0.8rem', margin: '0', display: 'block' }}>\n                    <ReactTimeAgo date={postInfo.createdAt} locale=\"en-US\" />\n                </h6>\n                {userInfo.id === postInfo.author._id && (\n                    <div className=\"edit\">\n                       <button className=\"edit-btn\">\n                           <Link className=\"edit-btn\" to={`/edit/${postInfo._id}`}>Edit this post</Link>\n                       </button>\n                       <button className=\"delete-btn\" onClick={handleDelete}>Delete</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}