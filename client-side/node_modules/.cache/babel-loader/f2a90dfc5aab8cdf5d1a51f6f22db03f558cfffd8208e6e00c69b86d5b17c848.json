{"ast":null,"code":"var _jsxFileName = \"/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostPage() {\n  _s();\n  // State to hold post information\n  const [postInfo, setPostInfo] = useState(null);\n\n  // Get user information from context\n  const {\n    userInfo\n  } = useContext(UserContext);\n\n  // Extract post ID from URL parameters\n  const {\n    id\n  } = useParams();\n\n  // Hook to programmatically navigate\n  const navigate = useNavigate();\n\n  // Fetch post information when component mounts or post ID changes\n  useEffect(() => {\n    fetch(`http://localhost:4000/post/${id}`).then(response => response.json()).then(postData => {\n      setPostInfo(postData);\n    });\n  }, [id]);\n\n  // Display a loading message while the post information is being fetched\n  if (!postInfo) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 16\n    }, this);\n  }\n\n  // Handle post deletion\n  const handleDelete = async () => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      const response = await fetch(`http://localhost:4000/post/${postInfo._id}`, {\n        method: 'DELETE',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        credentials: 'include' // Ensures cookies are sent\n      });\n      if (response.ok) {\n        // Redirect to the homepage after successful deletion\n        window.location.href = '/';\n      } else {\n        console.error('Failed to delete post');\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"image-post-page\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: postInfo.file,\n        alt: \"Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: postInfo.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n        children: postInfo.summary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"post-page-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: postInfo.content\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '1.2rem',\n          margin: '3px'\n        },\n        children: [\"by \", postInfo.author.username]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h6\", {\n        style: {\n          fontSize: '0.8rem',\n          margin: '0',\n          display: 'block'\n        },\n        children: /*#__PURE__*/_jsxDEV(ReactTimeAgo, {\n          date: postInfo.createdAt,\n          locale: \"en-US\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }, this), userInfo.id === postInfo.author._id && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"edit\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          className: \"edit-btn\",\n          to: `/edit/${postInfo._id}`,\n          children: \"Edit this post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"delete-btn\",\n          onClick: handleDelete,\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n_s(PostPage, \"tA/nJWzeXLtbckzaxV8z8jwAWrg=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = PostPage;\nvar _c;\n$RefreshReg$(_c, \"PostPage\");","map":{"version":3,"names":["useContext","useEffect","useState","useParams","useNavigate","Link","ReactTimeAgo","UserContext","jsxDEV","_jsxDEV","PostPage","_s","postInfo","setPostInfo","userInfo","id","navigate","fetch","then","response","json","postData","children","fileName","_jsxFileName","lineNumber","columnNumber","handleDelete","window","confirm","_id","method","headers","credentials","ok","location","href","console","error","className","src","file","alt","title","summary","dangerouslySetInnerHTML","__html","content","style","fontSize","margin","author","username","display","date","createdAt","locale","to","onClick","_c","$RefreshReg$"],"sources":["/Users/mashibann/Downloads/CRUD fullstack/client-side/src/pages/PostPage.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\nimport ReactTimeAgo from 'react-time-ago';\nimport { UserContext } from '../Context/userContext';\n\nexport default function PostPage() {\n    // State to hold post information\n    const [postInfo, setPostInfo] = useState(null);\n    \n    // Get user information from context\n    const { userInfo } = useContext(UserContext);\n    \n    // Extract post ID from URL parameters\n    const { id } = useParams();\n    \n    // Hook to programmatically navigate\n    const navigate = useNavigate();\n\n    // Fetch post information when component mounts or post ID changes\n    useEffect(() => {\n        fetch(`http://localhost:4000/post/${id}`)\n            .then(response => response.json())\n            .then(postData => {\n                setPostInfo(postData);\n            });\n    }, [id]);\n\n    // Display a loading message while the post information is being fetched\n    if (!postInfo) {\n        return <p>Loading...</p>;\n    }\n\n    // Handle post deletion\n    const handleDelete = async () => {\n        if (window.confirm('Are you sure you want to delete this post?')) {\n            const response = await fetch(`http://localhost:4000/post/${postInfo._id}`, {\n                method: 'DELETE',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                credentials: 'include', // Ensures cookies are sent\n            });\n    \n            if (response.ok) {\n                // Redirect to the homepage after successful deletion\n                window.location.href = '/';\n            } else {\n                console.error('Failed to delete post');\n            }\n        }\n    };\n\n    return (\n        <div>\n            {/* Display post image */}\n            <div className=\"image-post-page\">\n                <img src={postInfo.file} alt=\"Post\" />\n            </div>\n            \n            {/* Display post title and summary */}\n            <div className=\"post-page\">\n                <h1>{postInfo.title}</h1>\n                <h4>{postInfo.summary}</h4>\n            </div>\n            \n            {/* Display post content, author information, and timestamp */}\n            <div className=\"post-page-content\">\n                <div dangerouslySetInnerHTML={{ __html: postInfo.content }} />\n                <h6 style={{ fontSize: '1.2rem', margin: '3px' }}>by {postInfo.author.username}</h6>\n                <h6 style={{ fontSize: '0.8rem', margin: '0', display: 'block' }}>\n                    <ReactTimeAgo date={postInfo.createdAt} locale=\"en-US\" />\n                </h6>\n                \n                {/* Show edit and delete options if the current user is the author */}\n                {userInfo.id === postInfo.author._id && (\n                    <div className=\"edit\">\n                        <Link className=\"edit-btn\" to={`/edit/${postInfo._id}`}>Edit this post</Link>\n                        <button className=\"delete-btn\" onClick={handleDelete}>Delete</button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}